<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ============================= -->
    <!-- Health Statistics Dashboard Action -->
    <!-- ============================= -->
    <record id="action_health_statistics" model="ir.actions.act_window">
        <field name="name">Health Statistics</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">graph,pivot</field>
        <field name="context">{'search_default_group_fitness': 1}</field>
    </record>

    <!-- Graph View -->
    <record id="view_employee_health_graph" model="ir.ui.view">
        <field name="name">hr.employee.health.graph</field>
        <field name="model">hr.employee</field>
        <field name="arch" type="xml">
            <graph string="Health Statistics" type="bar" stacked="True">
                <field name="department_id"/>
                <field name="fitness_status"/>
            </graph>
        </field>
    </record>

    <!-- Pivot View -->
    <record id="view_employee_health_pivot" model="ir.ui.view">
        <field name="name">hr.employee.health.pivot</field>
        <field name="model">hr.employee</field>
        <field name="arch" type="xml">
            <pivot string="Health Analysis">
                <field name="department_id" type="row"/>
                <field name="blood_group" type="col"/>
                <field name="fitness_status" type="col"/>
            </pivot>
        </field>
    </record>

    <!-- ============================= -->
    <!-- Report Actions -->
    <!-- ============================= -->
    <!-- Health Card Report Action -->
    <record id="report_employee_health_card" model="ir.actions.report">
        <field name="name">Employee Health Card</field>
        <field name="model">hr.employee</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">employee_health_information.report_health_card_template</field>
        <field name="report_file">employee_health_information.report_health_card_template</field>
        <field name="print_report_name">'Health Card - %s' % (object.name)</field>
        <field name="binding_model_id" ref="hr.model_hr_employee"/>
        <field name="binding_type">report</field>
    </record>

    <!-- Health Summary Report Action -->
    <record id="report_employee_health_summary" model="ir.actions.report">
        <field name="name">Health Summary</field>
        <field name="model">hr.employee</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">employee_health_information.report_health_summary_template</field>
        <field name="report_file">employee_health_information.report_health_summary_template</field>
        <field name="print_report_name">'Health Summary'</field>
    </record>


    <!-- Update Print Health Cards action -->
    <record id="action_print_health_cards" model="ir.actions.act_window">
        <field name="name">Print Health Cards</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="hr.view_employee_tree"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Select employees to print their health cards
            </p>
        </field>
    </record>

    <!-- Update Health Summary action -->
    <record id="action_health_summary" model="ir.actions.act_window">
        <field name="name">Health Summary</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="hr.view_employee_tree"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Select employees to generate health summary
            </p>
        </field>
    </record>

    <!-- Server action for printing health cards -->
    <record id="action_server_print_health_cards" model="ir.actions.server">
        <field name="name">Print Health Cards</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="binding_model_id" ref="hr.model_hr_employee"/>
        <field name="binding_view_types">list,form</field>
        <field name="state">code</field>
        <field name="code">
action = {
    'type': 'ir.actions.report',
    'report_name': 'employee_health_information.report_health_card_template',
    'report_type': 'qweb-pdf',
    'docs': records,
}
        </field>
    </record>

    <!-- Server action for health summary -->
    <record id="action_server_print_health_summary" model="ir.actions.server">
        <field name="name">Print Health Summary</field>
        <field name="model_id" ref="hr.model_hr_employee"/>
        <field name="binding_model_id" ref="hr.model_hr_employee"/>
        <field name="binding_view_types">list,form</field>
        <field name="state">code</field>
        <field name="code">
action = {
    'type': 'ir.actions.report',
    'report_name': 'employee_health_information.report_health_summary_template',
    'report_type': 'qweb-pdf',
    'docs': records,
}
        </field>
    </record>


    <!-- ============================= -->
    <!-- Menu Items -->
    <!-- ============================= -->
    <menuitem id="menu_health_statistics" 
              name="Statistics" 
              parent="menu_health_reports" 
              action="action_health_statistics" 
              sequence="10"/>
              
    <menuitem id="menu_print_health_card" 
              name="Print Health Cards" 
              parent="menu_health_reports" 
              action="action_print_health_cards"
              sequence="20"/>

    <menuitem id="menu_health_summary_report" 
              name="Health Summary" 
              parent="menu_health_reports" 
              action="action_health_summary"
              sequence="30"/>
</odoo>
